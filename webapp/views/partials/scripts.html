{{ define "scripts" }}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/posts.js"></script>
<script>
function formatRelativeDate(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diffMs = now - date;
    const diffSec = Math.floor(diffMs / 1000);
    const diffMin = Math.floor(diffSec / 60);
    const diffHour = Math.floor(diffMin / 60);
    const diffDay = Math.floor(diffHour / 24);

    if (diffSec < 60) return 'now';
    if (diffMin < 60) return `${diffMin} min`;
    if (diffHour < 24) return `${diffHour} h`;
    if (diffDay < 7) return `${diffDay} d`;
    return date.toLocaleDateString('en-US', { day: '2-digit', month: 'short' });
}

function formatFullDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleString('en-US', {
        year: 'numeric',
        month: 'short',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        hour12: true
    });
}

document.querySelectorAll('.post-time').forEach(function(span) {
    const iso = span.getAttribute('data-time');
    if (iso) {
        span.textContent = formatRelativeDate(iso);
        span.title = formatFullDate(iso);
    }
});
</script>
{{ end }}